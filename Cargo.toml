[profile.dev.package.backtrace]
opt-level = 3

[profile.dev.package.num-bigint-dig]
opt-level = 3

[profile.release]
codegen-units = 1
lto = true
strip = true

[workspace]
exclude = ["xtask"]
members = [
    "crates/kitsune-cache",
    "crates/kitsune-captcha",
    "crates/kitsune-config",
    "crates/kitsune-core",
    "crates/kitsune-db",
    "crates/kitsune-email",
    "crates/kitsune-embed",
    "crates/kitsune-http-client",
    "crates/kitsune-http-signatures",
    "crates/kitsune-language",
    "crates/kitsune-messaging",
    "crates/kitsune-observability",
    "crates/kitsune-retry-policies",
    "crates/kitsune-search",
    "crates/kitsune-storage",
    "crates/kitsune-test",
    "crates/kitsune-type",
    "kitsune",
    "kitsune-cli",
    "kitsune-job-runner",
    "lib/athena",
    "lib/post-process",
    "lib/speedy-uuid",
]
resolver = "2"

[workspace.package]
edition = "2021"
version = "0.0.1-pre.3"

[patch.crates-io]
# Patch the opentelemetry crate versions to get rid of a few tonic dependencies
opentelemetry_api = { git = "https://github.com/open-telemetry/opentelemetry-rust.git", rev = "41e8d63652b323866c03981b4b2ca62b9b8d6d44" }
opentelemetry-http = { git = "https://github.com/open-telemetry/opentelemetry-rust.git", rev = "41e8d63652b323866c03981b4b2ca62b9b8d6d44" }
opentelemetry-otlp = { git = "https://github.com/open-telemetry/opentelemetry-rust.git", rev = "41e8d63652b323866c03981b4b2ca62b9b8d6d44" }
opentelemetry_sdk = { git = "https://github.com/open-telemetry/opentelemetry-rust.git", rev = "41e8d63652b323866c03981b4b2ca62b9b8d6d44" }

redis = { git = "https://github.com/aumetra/redis-rs.git", rev = "3c4ee09d432a69e1d87d66dcba14c519467c9b81" }
