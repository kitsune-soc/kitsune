[package]
name = "athena"
authors.workspace = true
edition.workspace = true
version.workspace = true
license = "MIT OR Apache-2.0"

[[example]]
name = "basic_queue"
required-features = ["redis"]

[dependencies]
ahash = { version = "0.8.11", optional = true }
async-trait = "0.1.80"
either = { version = "1.11.0", default-features = false, optional = true }
futures-util = { version = "0.3.30", default-features = false }
iso8601-timestamp = "0.2.17"
just-retry = { path = "../just-retry", optional = true }
multiplex-pool = { path = "../multiplex-pool", optional = true }
once_cell = { version = "1.19.0", optional = true }
rand = { version = "0.8.5", optional = true }
redis = { version = "0.25.3", default-features = false, features = [
    "ahash",
    "connection-manager",
    "script",
    "streams",
    "tokio-comp",
], optional = true }
serde = { version = "1.0.199", features = ["derive"], optional = true }
simd-json = { version = "0.13.10", optional = true }
smol_str = "0.2.1"
speedy-uuid = { path = "../speedy-uuid", features = ["redis", "serde"] }
thiserror = "1.0.59"
tokio = { version = "1.37.0", features = ["macros", "rt", "sync"] }
tokio-util = { version = "0.7.10", features = ["rt"] }
tracing = "0.1.40"
typed-builder = "0.18.2"

[features]
redis = [
    "dep:ahash",
    "dep:either",
    "dep:just-retry",
    "dep:multiplex-pool",
    "dep:once_cell",
    "dep:rand",
    "dep:redis",
    "dep:serde",
    "dep:simd-json",
]

[dev-dependencies]
kitsune-test = { path = "../../crates/kitsune-test" }
redis = { version = "0.25.3", features = ["connection-manager"] }
tracing-subscriber = "0.3.18"

[lints]
workspace = true
